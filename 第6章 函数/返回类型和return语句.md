## 返回类型和return语句



#### return语句有两种形式

```c++
return;
return expression;
```



#### 无返回值函数

+ 没有返回值的**return**（第1种形式的return）只能用在返回类型是void的函数中
+ 返回类型是void的函数不要求一定要有**return**语句
    + 这类函数的最后一句后面会隐式的执行**return**
+ 在void函数中可以使用 **return** 在中间位置提前退出
+ void函数也可使用 **return** **expression**; 
    + 此时expression必须是另外一个返回void的函数
+ void函数返回其它类型会产生编译错误



#### 有返回值函数

+ return语句的返回值类型必须与函数的返回类型相同
    + 或者能隐式地转换成函数的返回类型
+ 具有返回值的函数只能通过一条有效的return语句退出
+ 返回的值用于初始化调用点的一个临时量
+ 不能返回局部对象的引用或指针
    + 函数完成后，所占用的存储空间会被释放，局部变量的引用或指针将不再指向有效的内存区域
+ 函数的返回类型决定函数调用是否是左值
    + 调用一个返回引用的函数得到左值，其他返回类型得到右值
    + 可以为返回类型是非常量引用的函数的结果赋值
+ C++11新标准规定，函数可以返回花括号包围的列表
    + 如果列表为空，临时量执行值初始化
    + 如果列表不为空，返回的值由函数的返回类型决定
        + 如果函数返回的是内置类型，花括号包围的列表最多包含一个值，且该值所占空间不应该大于目标类型的空间
        + 如果函数返回的是类类型，由类本身定义初始值如何使用
+ 允许main函数没有return语句直接结束
    + 编译器会隐式地插入一条返回0的return语句
    + main函数的返回值可以当作状态显示器，返回0表示执行成功，返回其它值表示执行失败，其中非0值的具体含义依机器而定
+ 如果一个函数调用了它自身，这种函数叫做递归函数
    + main函数不能调用它自己



#### 返回数组指针

+ 因为数组不能被拷贝，所以函数不能返回数组，但是函数可以返回数组的指针或引用
+ 定义数组的指针或引用比较繁琐，通常使用类型别名进行简化

```c++
typedef int arrT[10]; //arrT的类型是含有10个整数的数组
using arrT = int[10];

arrT * func(int i); //func返回一个指向10个整数的数组的指针
```

+ 不使用类型别名声明一个返回数组指针的函数

```c
Type (*function(parameter_list)) [dimension]
//Type表示元素的类型
//dimension表示数组的大小
//(*function(parameter_list))两端的括号必须存在，如果没有括号，函数的返回类型将是指针的数组  		
```

+ 例如， int (*func(int i)) [10];
    + func(int i) 表示func函数需要一个int类型的实参
    + (*func(int i)) 表示可以对func函数调用的结果执行解引用
    + (*func(int i)) [10] 表示解引用func函数的调用结果得到一个大小是10的数组
    +  int (*func(int i)) [10]表示数组中的元素是int类型
+ 使用尾置返回类型
    + 任何函数的定义都可以使用尾置返回，但是一般用于复杂函数
    + 尾置返回类型跟在形参列表后面，以->符号开头，并在函数的返回类型处以auto代替

```c++
auto func(int i) -> int (*)[10];
```

+ 使用decltype
    + decltype不负责将数组类型转换成对应的指针，因此decltype的结果是数组

```c
decltype(odd) *arrPtr(int i)
```

